
# “天工·弈控”操作系统OS Web平台演示版设计方案

## 1. 设计目标与定位转变

**核心目标：** 构建一个高保真的 **B/S 架构演示平台 (Web Demo)**。

* **去操作系统化：** 不涉及底层驱动、内核编译、Docker容器编排等复杂OS开发。
* **重视觉呈现：** 重点展示“1+N+X”的商业模式界面、生产数据的可视化、以及“司南”助手的智能交互逻辑。
* **数据模拟：** 使用模拟数据流（Mock Data）代替真实的工业现场采集，确保演示时的流畅性和数据的“完美性”。

---

## 2. 系统技术架构 (Web版)

采用标准的 **前后端分离** 架构，轻量化部署。

* **前端 (核心):** React 18 + Ant Design Pro (企业级后台框架) + ECharts (图表) + Three.js (3D动效)。
* **后端 (辅助):** Python FastAPI。主要用于提供API接口，返回模拟的生产数据，以及处理简单的用户登录和订阅逻辑。
* **数据存储:** PostgreSQL (存储用户/菜单/配置) + JSON文件 (存储模拟的图谱结构和时序数据)。

---

## 3. 核心页面功能设计 (对应“1+N+X”架构)

### 3.1 基础层展示 —— “设备接入中心” (对应 OS内核)

**设计意图：** 演示“基础切入”的极简连接体验，而非真的去连接PLC。

* **页面功能：**
* **设备拓扑图：** 这是一个静态但可交互的拓扑界面，展示“云-边-端”连接状态。
* **模拟接入向导：**
1. 用户点击“添加设备”。
2. 弹窗模拟扫描进度条（3秒动画）。
3. 自动“发现”5台设备（如：贴片机A、回流焊B）。
4. 点击“一键接入”，界面显示绿灯亮起，提示“数据通道已打通”。


* **基础体检报告：** 点击生成，前端直接渲染一份预置好的精美PDF或HTML报告，展示OEE基准值。



### 3.2 服务层展示 —— “能力订阅市场” (对应 N个原子能力)

**设计意图：** 演示“像搭积木一样”的商业模式。

* **页面布局：** 类似 Apple App Store 或阿里云市场的卡片式布局。
* **原子能力卡片：**
* **视觉感知包 (MSA-YOLO)：** 封面为正在识别电路板的动图。
* **运筹优化包 (天筹算法)：** 封面为路径规划的动态线条。
* **知识图谱包 (格物推理)：** 封面为节点连接网。


* **交互逻辑：**
* 默认状态为“未订阅”（灰色）。
* 用户点击“立即订阅” -> 模拟支付弹窗 -> 状态变为“已激活”（高亮）。
* **关键联动：** 只有订阅了“知识图谱包”，后续的“司南助手”才能点击展开“归因分析”详情，否则提示需订阅。



### 3.3 场景层展示 —— “生产可视化面板” (对应 X个场景APP)

**设计意图：** 系统的核心主界面，展示数据价值与异常管理。

* **布局设计：** 大屏化设计（Dashboard）。
* **顶部：** 关键指标栏（计划产量 vs 实时产量、OEE、直通率）。
* **中部：** 实时产线仿真图（2.5D图片或简单3D模型），用颜色标记工位状态（绿=运行，红=异常）。
* **右侧：** **司南助手驻留区**（见下文详述）。
* **底部：** 实时数据滚动条。



### 3.4 生态层展示 —— “开放平台开发者中心” (OpenAPI)

**设计意图：** 展示系统的开放性，证明支持第三方接入。

* **页面风格：** 极客风、文档化、代码化。
* **核心模块：**
* **API 密钥管理：** 界面展示 `Client ID` 和 `Client Secret` 的生成过程，用户点击“重置密钥”，会有加密星号显示。
* **接口调试沙箱 (Sandbox)：**
* 左侧：API列表（如 `/api/v1/device/status`）。
* 右侧：内嵌 **Swagger UI** 风格的调试框。
* **交互：** 用户点击“Send Request”，下方控制台立即返回一段格式化的 JSON 数据（模拟真实返回），让用户感觉接口是通的。


* **算法模型上传：** 一个文件上传区域，演示合作伙伴如何上传自己的 `.pt` 或 `.onnx` 模型文件，上传成功后显示“模型部署中...”。



---

## 4. 核心交互角色：“司南” (Sinan) —— 专业理性风格

**设计定位：** 系统的“智能中控”，从原来的可爱形象改为**全息数据形态**，体现专业度。

### 4.1 形象设计

* **视觉主体：** 一个悬浮的、半透明的**全息几何体**（类似《钢铁侠》JARVIS的简化版）。
* **常态：** 缓慢自转的**青色光环**，显示“System Stable”。
* **异常态：** 瞬间收缩并变为**警示红 (Amber/Red)**，转速加快，发出脉冲光效。

### 4.2 交互逻辑

1. **异常触发：**
* 前端定时器触发模拟故障（例如演示开始后30秒）。
* 司南变红，弹出半透明的 **HUD (平视显示器)** 风格提示框。
* **提示文案：** `[警告] 检测到 #5 贴片机 抛料率异常飙升 (8.5%)`。


2. **点击跳转：**
* 用户点击提示框，进入**“决策指挥中心”**页面。


3. **决策指挥中心页面：**
* **左侧（归因）：** 展示**故障树 (Fault Tree)** 动画，线条从“抛料异常”流向“吸嘴磨损”，且标注“置信度 92%”。
* **右侧（决策）：** 展示两套方案的**对比卡片**。
* *方案A（推荐）：* 立即停机维护（损失产能 5%，规避质量风险）。
* *方案B：* 降速运行（损失产能 15%，风险未知）。


* 用户点击“执行方案A”，系统弹出“指令已下发”的绿字终端代码流。



---

## 5. 开发任务清单 (简化版)

### Phase 1: 框架搭建-完成

* [前端] 搭建 React + Ant Design Pro 基础脚手架。
* [前端] 设计“司南”的 CSS3/Canvas 动效组件。
* [后端] 搭建 FastAPI 服务，准备好各页面的 Mock JSON 数据。

### Phase 2: 核心页面开发-完成

* [前端] **Dashboard 开发：** 集成 ECharts 图表，完成产量对比图和不良率仪表盘。
* [前端] **司南交互开发：** 实现“常态 -> 报警 -> 详情”的跳转逻辑。
* [前端] **能力商店开发：** 实现卡片点击变色的订阅逻辑。

### Phase 3: 开放平台与演示打磨

* [前端] **OpenAPI 页面：** 嵌入 Swagger UI 组件，配置好模拟的返回数据。
* [前端] **设备接入向导：** 制作扫描和连接成功的 SVG 动画。
* [整机] 串联演示剧本：确保从“首页监控”到“报错”再到“解决”的流程丝滑无各种Bug。

---
项目性质为“Web演示平台”，技术栈锁定为便于展示的 React + FastAPI (Mock)。
