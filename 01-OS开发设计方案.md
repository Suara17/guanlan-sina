
# “天工·弈控”操作系统 Web 平台演示版设计方案 (v2.0 -基于代码实现版)

## 1. 设计目标与定位

**核心目标：** 构建一个高保真的 **工业 OS 概念演示平台 (Web Demo)**，集成真实的大模型能力与模拟的工业数据流。

* **轻量化架构：** 采用现代化的 Vite 构建工具，摒弃笨重的传统后台框架，追求极速启动与极致性能。
* **视觉现代化：** 使用 Tailwind CSS 构建深色/科技感 UI，强调数据可视化的即时反馈。

---

## 2. 系统技术架构

根据 `package.json` 和 `vite.config.ts`，系统采用极新的技术栈组合：

### 2.1 前端架构 (核心)

* **核心框架：** **React 19** + **TypeScript**。
* **构建工具：** **Vite 6** (配置了 API Proxy 转发 `/api` 请求)。
* **UI 样式：** **Tailwind CSS** (原子化 CSS) + **Lucide React** (图标库)。
* **数据可视化：** **Recharts** (响应式图表库，用于生产和质量监控)。
* **AI 客户端：** `@google/genai` SDK (直接对接 Gemini 模型)。
* **代码规范：** Biome (替代 ESLint/Prettier)。

### 2.2 后端架构 (辅助)

* **API 服务：** Python FastAPI (运行在 `:8000` 端口，提供 Mock 数据接口)。

---

## 3. 核心页面功能设计 (对应 Sidebar 导航)

根据 `Sidebar.tsx` 的路由配置，系统重构为以下六大核心模块：

### 3.1 生产可视化 (Dashboard) - `/app/`

**设计意图：** 系统的“第一屏”，基于 `Dashboard.tsx` 实现。

* **顶部信息栏：**
* 显示产线状态（如：SMT 智能产线 A03 - 🟢 运行中）。
* 展示班次信息（白班）、负责人及运行时间。


* **左侧核心图表区：**
* **实时产量监控 (BarChart)：** 双柱状图对比“计划产量”与“实际产量”。
* *逻辑：* 当实际产量低于计划 95% 时，柱体自动变红预警。


* **质量实时看板 (PieChart)：** 环形图展示良品/不良品占比。
* *逻辑：* 居中显示不良率数值，并标注环比趋势（如：↓3.8%）。


* **KPI 进度条：** OEE (设备综合效率)、班次完成率、平均节拍 (CT) 的水平进度条。


* **右侧异常流与交互区：**
* **异常信息流 (Alert Stream)：** 垂直时间轴展示报警信息，按严重程度分级（Critical/Error/Warning），支持点击交互。
* **司南驻留区：** 底部嵌入 `SinanAvatar` 组件，实时监听异常状态。



### 3.2 司南智控 (Sinan Intelligence) - `/app/sinan`

**设计意图：** 独立的 AI 对话与诊断页面。

* **功能集成：**
* **AI 诊断报告：** 调用 `geminiService.ts` 中的 `analyzeSystemHealth` 接口。
* **输入：** 传入当前的 metrics（生产指标 JSON）。
处理：算法/知识图谱
* **输出：** 诊断报告



### 3.3 OS 内核接入 (Kernel Connect) - `/app/kernel`

**设计意图：** 对应原方案的“设备接入中心”。

* **功能：** 模拟物理设备（PLC/CNC）的握手流程。
* **视觉：** 保留原设计的拓扑连接动画，展示从“未连接”到“数据通道打通”的状态跃迁。

### 3.4 能力商店 (Marketplace) - `/app/marketplace`

**设计意图：** 展示商业模式。

* **功能：** 卡片式布局展示 MSA-YOLO、天筹算法等原子能力。
* **交互：** 点击订阅后，解锁侧边栏或 Dashboard 中的特定高级分析功能。

### 3.5 场景编排 (Scenario Builder) - `/app/builder`

**设计意图：** 新增模块，体现 OS 的可配置性。

* **功能：** 允许用户通过拖拽方式，将“能力原子”组合成新的业务流程（例如：视觉检测 + 机械臂剔除）。

### 3.6 开发者生态 (Ecosystem) - `/app/ecosystem`

**设计意图：** 对应原方案的 OpenAPI。

* **功能：** 集成 Swagger UI 或 Redoc 风格的 API 文档，提供 `client-gen` 生成的 TypeScript SDK 示例。

---

## 4. 核心交互角色：“司南” (Sinan)

根据 `SinanAvatar.tsx` (引用) 和 `geminiService.ts`，司南的角色更加具体化。

### 4.1 状态机设计

在代码中，司南包含两种核心状态 (`sinanMode`)：

1. **Idle (常态)：** * 视觉：平静的呼吸灯效果或静态展示。
* 行为：后台静默分析数据。


2. **Alert (报警态)：** * **触发机制：** 前端 `useEffect` 定时器（如 2秒后）或真实数据阈值触发。
* **视觉：** 状态栏变红，弹出气泡提示。
* **交互：** 提示文案如 *“#5 贴片机不良品率飙升至8%！疑似吸嘴故障”*。
