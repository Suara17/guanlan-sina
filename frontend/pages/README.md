# 页面说明文档

本目录包含"天工·弈控"系统的所有页面组件。

## 页面列表

### Dashboard.tsx
生产可视化仪表盘页面，实时监控产线状态。

**功能：**
- 显示产线基本信息（名称、工单、负责人、运行时间）
- 实时产量监控图表（计划 vs 实际产量）
- 质量实时看板（良品/不良品饼图）
- 关键指标展示（OEE、完成率、平均节拍）
- 异常信息流（按时间线显示告警）
- 集成司南机器人头像，自动检测异常

**数据可视化：**
- 使用 Recharts 图表库
- 柱状图：计划产量 vs 实际产量
- 饼图：良品率统计
- 进度条：OEE、完成率、平均节拍

---

### KernelConnect.tsx
OS内核接入向导页面，用于连接工业设备。

**功能：**
- 三步骤向导流程：设备扫描 → 协议匹配 → 诊断报告
- 扫描局域网内的工业设备（PLC、相机、IoT传感器）
- 自动匹配 Modbus/OPC UA 协议
- 显示连接时长和数据吞吐量
- 生成产线效率初诊报告，提示潜在问题
- 引导用户前往能力商店解决问题

**步骤：**
1. **设备扫描** - 自动发现支持 Modbus/OPC UA 协议的设备
2. **协议匹配** - 显示已发现的设备及其状态
3. **诊断报告** - 生成产线效率初诊报告（Lite版）

---

### Marketplace.tsx
原子能力商店页面，按需订阅工业算法。

**功能：**
- 展示可订阅的原子能力（视觉检测、运筹优化、知识图谱、仿真推演）
- 显示能力价格、分类、描述
- 标记已订阅的能力
- 支持一键订阅功能
- 提示更多能力即将上线

**可用能力：**
- **MSA-YOLO 视觉检测**（¥599/月）- 基于深度学习的表面缺陷检测算法
- **天筹·运筹优化引擎**（¥1,200/月）- 针对排程调度的求解器
- **格物·知识图谱**（¥800/月）- 设备故障根因分析与推理
- **浑天·仿真推演**（¥2,000/月）- 数字孪生仿真环境

**能力分类：**
- Vision（视觉算法）
- Optimization（优化引擎）
- Data（数据分析）
- Simulation（仿真推演）

---

### ScenarioBuilder.tsx
场景编排页面，可视化构建生产流程。

**功能：**
- 拖拽式流程编排界面
- 组件库：数据源、原子能力、执行动作
- 画布区域：可视化节点连接
- 工具栏：重置、保存、部署运行
- 支持创建 PCB 缺陷检测流程等场景

**组件库：**
- **数据源**：工业相机流、PLC 信号
- **原子能力**：MSA-YOLO 检测、运筹优化求解
- **执行动作**：机械臂控制、发送至 MQTT

**示例流程：**
相机采集 → MSA-YOLO 检测 → NG 剔除指令 / 数据上云

---

### SinanAnalysis.tsx
司南智能诊断中心页面，提供根因分析和决策优化。

**功能：**
- **格物·根因分析**：知识图谱可视化，展示异常传播路径
- **天筹·决策优化**：提供多个解决方案选项
- 显示根因置信度（如吸嘴磨损 92%）
- AI 推荐最佳方案（低风险/中风险标注）
- 显示方案执行时长
- 引导升级高级算法（预测性维护）
- 关联工单和异常设备信息

**分析模块：**
- **格物**：基于知识图谱的根因分析，展示异常传播路径
- **天筹**：决策优化引擎，提供多个解决方案选项

**解决方案选项：**
- 方案 A：立即停机更换吸嘴（推荐，15分钟，低风险）
- 方案 B：调整气压参数补偿（2分钟，中风险）

---

## 依赖关系

- **路由**：所有页面组件依赖 `react-router-dom`
- **组件**：页面组件复用 `components` 目录下的组件（如 SinanAvatar）
- **类型定义**：使用 `types.ts` 中定义的类型（如 AlertItem、ProductionData、Capability、SolutionOption）
- **图表库**：Dashboard 使用 Recharts 进行数据可视化
- **图标库**：使用 `lucide-react` 提供图标
- **样式**：使用 Tailwind CSS 进行样式设计

## 页面路由映射

| 页面 | 路由路径 | 说明 |
|------|----------|------|
| Dashboard | `/app/` | 生产可视化仪表盘 |
| SinanAnalysis | `/app/sinan` | 司南智能诊断中心 |
| KernelConnect | `/app/kernel` | OS内核接入 |
| Marketplace | `/app/marketplace` | 能力商店 |
| ScenarioBuilder | `/app/builder` | 场景编排 |
| LandingPage | `/` | 产品落地页 |
| LoginPage | `/login` | 用户登录页 |
