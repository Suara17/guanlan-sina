# é¡¹ç›®ä»£ç ç»“æ„è¯´æ˜

## ğŸ“Š æ€»ä½“æ¶æ„

è¿™æ˜¯ä¸€ä¸ª**å·¥ä¸šæ™ºèƒ½å†³ç­–æ”¯æŒå¹³å°**ï¼ŒåŒ…å«ä¸¤ä¸ªæ ¸å¿ƒå­ç³»ç»Ÿï¼š
- **è§‚æ¾œ** - ç”Ÿäº§å¯è§†åŒ–é—¨æˆ·
- **å¸å—** - å†³ç­–åŠ©æ‰‹

**æŠ€æœ¯æ¶æ„**ï¼š
```
Frontend (React + TypeScript + Vite)
    â†“ HTTPS/WebSocket
Backend (FastAPI + SQLModel + PostgreSQL)
    â†“
Database (PostgreSQL 17)
    â†“
Message Queue (Redis + Celery)
```

---

## ğŸ¯ å‰ç«¯ç»“æ„ (`frontend/`)

### æ ¸å¿ƒç›®å½•

| ç›®å½• | åŠŸèƒ½ |
|------|------|
| `src/client/` | è‡ªåŠ¨ç”Ÿæˆçš„APIå®¢æˆ·ç«¯ï¼ˆOpenAPIï¼‰ |
| `src/components/` | Reactç»„ä»¶åº“ |
| `src/routes/` | TanStack Routerè·¯ç”±å®šä¹‰ |
| `src/hooks/` | è‡ªå®šä¹‰React Hooks |
| `tests/` | Playwright E2Eæµ‹è¯• |

### ä¸»è¦ç»„ä»¶

| ç»„ä»¶ | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| **Dashboard** | `components/Dashboard/` | ä»ªè¡¨ç›˜ï¼ˆç”Ÿäº§å›¾è¡¨ã€è‰¯ç‡å¡ç‰‡ï¼‰ |
| **Admin** | `components/Admin/` | ç”¨æˆ·ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ |
| **Sidebar** | `components/Sidebar/` | ä¾§è¾¹æ å¯¼èˆª |
| **UIç»„ä»¶** | `components/ui/` | shadcn/uiåŸºç¡€ç»„ä»¶ |

### å…³é”®é¡µé¢

| é¡µé¢ | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| é¦–é¡µ | `routes/index.tsx` | è§‚æ¾œ-å¸å—å¹³å°ä»‹ç» |
| ç™»å½• | `routes/login.tsx` | ç”¨æˆ·ç™»å½• |
| æ³¨å†Œ | `routes/signup.tsx` | ç”¨æˆ·æ³¨å†Œ |
| Dashboard | `routes/_layout/dashboard.tsx` | ç”Ÿäº§æ•°æ®ä»ªè¡¨ç›˜ |

### æŠ€æœ¯æ ˆ

- React 19.1.1 + TypeScript 5.9.3
- Vite 7.2.7ï¼ˆæ„å»ºå·¥å…·ï¼‰
- TanStack Router 1.147.3ï¼ˆè·¯ç”±ï¼‰
- TanStack Query 5.90.12ï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
- shadcn/ui + Radix UIï¼ˆUIç»„ä»¶ï¼‰
- Tailwind CSS 4.1.17ï¼ˆæ ·å¼ï¼‰
- Recharts 3.6.0ï¼ˆå›¾è¡¨ï¼‰
- Playwright 1.57.0ï¼ˆE2Eæµ‹è¯•ï¼‰

---

## âš™ï¸ åç«¯ç»“æ„ (`backend/`)

### æ ¸å¿ƒç›®å½•

| ç›®å½• | åŠŸèƒ½ |
|------|------|
| `app/api/routes/` | APIè·¯ç”±å®ç° |
| `app/core/` | æ ¸å¿ƒé…ç½®ï¼ˆæ•°æ®åº“ã€å®‰å…¨ã€Celeryï¼‰ |
| `app/alembic/` | æ•°æ®åº“è¿ç§»è„šæœ¬ |
| `app/email-templates/` | é‚®ä»¶æ¨¡æ¿ |
| `tests/` | pytestå•å…ƒæµ‹è¯• |

### ä¸»è¦APIæ¨¡å—

| æ¨¡å— | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| **ç”Ÿäº§æ•°æ®** | `api/routes/production.py` | ç”Ÿäº§çº¿ã€å·¥ä½ã€ç¼ºé™·è®°å½• |
| **å¼‚å¸¸ç®¡ç†** | `api/routes/anomalies.py` | å¼‚å¸¸ã€è¯Šæ–­ã€è§£å†³æ–¹æ¡ˆ |
| **ç”¨æˆ·ç®¡ç†** | `api/routes/users.py` | ç”¨æˆ·CRUDæ“ä½œ |
| **è®¤è¯** | `api/routes/login.py` | ç™»å½•ã€Tokenç”Ÿæˆ |
| **é¡¹ç›®ç®¡ç†** | `api/routes/items.py` | é¡¹ç›®å¢åˆ æ”¹æŸ¥ |

### æ•°æ®æ¨¡å‹ (`models.py`)

| æ¨¡å‹ | åŠŸèƒ½ |
|------|------|
| `User` | ç”¨æˆ·ä¿¡æ¯ |
| `Item` | é¡¹ç›®ä¿¡æ¯ |
| `ProductionLine` | ç”Ÿäº§çº¿ |
| `Station` | å·¥ä½ |
| `DefectRecord` | ç¼ºé™·è®°å½• |
| `Anomaly` | å¼‚å¸¸ |
| `Diagnosis` | è¯Šæ–­ |
| `Solution` | è§£å†³æ–¹æ¡ˆ |

### æŠ€æœ¯æ ˆ

- FastAPI < 1.0.0ï¼ˆWebæ¡†æ¶ï¼‰
- SQLModel < 1.0.0ï¼ˆORMï¼‰
- PostgreSQL 17ï¼ˆæ•°æ®åº“ï¼‰
- Alembic < 2.0.0ï¼ˆæ•°æ®åº“è¿ç§»ï¼‰
- PyJWT < 3.0.0ï¼ˆJWTè®¤è¯ï¼‰
- Celery[redis] >= 5.6.2ï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰
- Redis >= 6.4.0ï¼ˆç¼“å­˜ï¼‰
- pytest < 8.0.0ï¼ˆæµ‹è¯•ï¼‰

---

## ğŸ“ é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|
| `docker-compose.yml` | Dockerå®¹å™¨ç¼–æ’ |
| `docker-compose.local.yml` | æœ¬åœ°å¼€å‘é…ç½® |
| `docker-compose.traefik.yml` | Traefikåå‘ä»£ç† |
| `backend/pyproject.toml` | Pythonä¾èµ–é…ç½® |
| `frontend/package.json` | Node.jsä¾èµ–é…ç½® |
| `frontend/vite.config.ts` | Viteæ„å»ºé…ç½® |

---

## ğŸ§ª æµ‹è¯•ç»„ç»‡

### åç«¯æµ‹è¯• (`backend/tests/`)

```
tests/
â”œâ”€â”€ conftest.py              # pytesté…ç½®ï¼ˆfixturesï¼‰
â”œâ”€â”€ api/routes/              # APIè·¯ç”±æµ‹è¯•
â”œâ”€â”€ crud/                    # CRUDæ“ä½œæµ‹è¯•
â”œâ”€â”€ scripts/                 # è„šæœ¬æµ‹è¯•
â””â”€â”€ utils/                   # å·¥å…·å‡½æ•°æµ‹è¯•
```

### å‰ç«¯æµ‹è¯• (`frontend/tests/`)

```
tests/
â”œâ”€â”€ auth.setup.ts            # è®¤è¯è®¾ç½®
â”œâ”€â”€ config.ts                # æµ‹è¯•é…ç½®
â”œâ”€â”€ login.spec.ts            # ç™»å½•æµ‹è¯•
â”œâ”€â”€ sign-up.spec.ts          # æ³¨å†Œæµ‹è¯•
â”œâ”€â”€ reset-password.spec.ts   # å¯†ç é‡ç½®æµ‹è¯•
â”œâ”€â”€ user-settings.spec.ts    # ç”¨æˆ·è®¾ç½®æµ‹è¯•
â””â”€â”€ flow.spec.ts             # ç”¨æˆ·æµç¨‹æµ‹è¯•
```

---

## ğŸ“š æ–‡æ¡£æ–‡ä»¶

| æ–‡ä»¶ | å†…å®¹ |
|------|------|
| `README.md` | é¡¹ç›®è¯´æ˜ |
| `01-é¡¹ç›®æ¦‚è¿°ä¸éœ€æ±‚åˆ†æ.md` | è¯¦ç»†éœ€æ±‚æ–‡æ¡£ |
| `02-è§‚æ¾œç³»ç»ŸåŠŸèƒ½è®¾è®¡.md` | è§‚æ¾œåŠŸèƒ½è®¾è®¡ |
| `03-å¸å—ç³»ç»ŸåŠŸèƒ½è®¾è®¡.md` | å¸å—åŠŸèƒ½è®¾è®¡ |
| `04-æŠ€æœ¯æ¶æ„è®¾è®¡.md` | æŠ€æœ¯æ¶æ„è®¾è®¡ |
| `05-æ•°æ®å­˜å‚¨è®¾è®¡.md` | æ•°æ®å­˜å‚¨è®¾è®¡ |
| `06-å¼€å‘è®¡åˆ’ä¸æµ‹è¯•ç­–ç•¥.md` | å¼€å‘è®¡åˆ’ |
| `07-è¿ç»´ç›‘æ§ä¸å®‰å…¨åŠ å›º.md` | è¿ç»´ç›‘æ§ |
| `å¯åŠ¨æŒ‡å—.md` | é¡¹ç›®å¯åŠ¨æŒ‡å¼• |

---

## ğŸ”‘ å…³é”®æ–‡ä»¶ç´¢å¼•

### å‰ç«¯
- `frontend/src/main.tsx` - åº”ç”¨å…¥å£
- `frontend/src/routes/index.tsx` - é¦–é¡µ
- `frontend/src/components/Dashboard/ProductionChart.tsx` - ç”Ÿäº§å›¾è¡¨
- `frontend/vite.config.ts` - Viteé…ç½®

### åç«¯
- `backend/app/main.py` - FastAPIå…¥å£
- `backend/app/models.py` - æ•°æ®æ¨¡å‹
- `backend/app/core/config.py` - é…ç½®ç®¡ç†
- `backend/app/core/security.py` - å®‰å…¨è®¤è¯
- `backend/app/api/routes/production.py` - ç”Ÿäº§API
- `backend/app/api/routes/anomalies.py` - å¼‚å¸¸API

---

## ğŸ“Š æ•°æ®åº“è¿ç§»å†å²

1. `e2412789c190` - åˆå§‹åŒ–åŸºç¡€æ¨¡å‹
2. `d98dd8ec85a3` - æ›¿æ¢IDä¸ºUUID
3. `9c0a54914c78` - æ·»åŠ å­—ç¬¦ä¸²æœ€å¤§é•¿åº¦
4. `16e1257ee861` - æ·»åŠ ç”Ÿäº§æ¨¡å‹
5. `1a31ce608336` - æ·»åŠ çº§è”åˆ é™¤å…³ç³»
6. `7904fb24eeba` - æ·»åŠ å¸å—æ¨¡å‹

---

## ğŸ¢ é¡¹ç›®ä¿¡æ¯

- **å…¬å¸**: å¼€ç‰©ç»çº¬ç§‘æŠ€æœ‰é™å…¬å¸
- **äº§å“**: å¤©å·¥Â·ç»çº¬ç”Ÿäº§åä½œç³»ç»Ÿ
- **åº•å±‚æ¨¡å—** (è§„åˆ’ä¸­):
  - æ´å¾®: æ™ºèƒ½æ„ŸçŸ¥ç»ˆç«¯
  - æ ¼ç‰©: å·¥ä¸šçŸ¥è¯†å›¾è°±å¼•æ“
  - å¤©ç­¹: æ—¶ç©ºè¿ç­¹æ ¸å¿ƒ
  - æµ‘å¤©: æ•°å­—å­ªç”Ÿæ²™ç›˜

---

## ğŸ› ï¸ é¡¹ç›®ç‰¹ç‚¹

è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªæ ‡å‡†çš„**å‰åç«¯åˆ†ç¦»**æ¶æ„ï¼Œä½¿ç”¨**FastAPI + React**æŠ€æœ¯æ ˆï¼Œé€šè¿‡**Docker Compose**è¿›è¡Œå®¹å™¨åŒ–éƒ¨ç½²ã€‚å‰ç«¯é‡‡ç”¨ç°ä»£åŒ–çš„Reactç”Ÿæ€ï¼ˆTanStack Router/Query + shadcn/uiï¼‰ï¼Œåç«¯ä½¿ç”¨FastAPIæä¾›RESTful APIï¼Œæ•°æ®å­˜å‚¨åœ¨PostgreSQLä¸­ï¼Œé€šè¿‡Celery+Rediså¤„ç†å¼‚æ­¥ä»»åŠ¡ã€‚
